(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n.name,this._link=n.link,this._likes=n.likes,this._cardElementsSelectors=e,this._handleCardClick=r,this._handleConfirmDeleteClick=o,this._handleLikeClick=i,this._cardId=n._id,this._cardElement=n.cardElement,this._ownerId=a._id,this._userId=n.owner._id}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return this._element=document.querySelector(this._cardElementsSelectors.template).content.querySelector(this._cardElementsSelectors.card).cloneNode(!0),this._element}},{key:"generateCard",value:function(){return this._getTemplate(),this._elementName=this._element.querySelector(this._cardElementsSelectors.name),this._elementImg=this._element.querySelector(this._cardElementsSelectors.cardImg),this._likeCountElement=this._element.querySelector(this._cardElementsSelectors.numLike),this._likeCountElement.textContent=this._likes.length,this._elementName.textContent=this._name,this._elementImg.alt=this._name,this._elementImg.src=this._link,this._setEventListeners(),this._renderActiveLikes(),this._renderActiveDelIco(),this._element}},{key:"_renderActiveDelIco",value:function(){this._ownerId!==this._userId&&(this._buttonDeleteCard.style.display="none")}},{key:"_initialActiveLikes",value:function(){var e=this;return this._likes.find((function(t){return t._id===e._ownerId}))}},{key:"_likeActive",value:function(){this._likeButton.classList.add(this._cardElementsSelectors.likeActive)}},{key:"_renderActiveLikes",value:function(){var e=this;this._likes.find((function(t){return t._id===e._ownerId}))&&this._likeActive()}},{key:"_handleLikeCard",value:function(){this._initialActiveLikes()?this._handleLikeClick(!0,this._likes,this._cardId,this._likeButton,this._cardElementsSelectors.likeActive,this._likeCountElement):this._initialActiveLikes()||this._handleLikeClick(!1,this._likes,this._cardId,this._likeButton,this._cardElementsSelectors.likeActive,this._likeCountElement)}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton=this._element.querySelector(this._cardElementsSelectors.likeButton),this._likeButton.addEventListener("click",(function(){return e._handleLikeCard()})),this._buttonDeleteCard=this._element.querySelector(this._cardElementsSelectors.buttonDeleteCard),this._buttonDeleteCard.addEventListener("click",(function(){e._handleConfirmDeleteClick.open(e._cardId,e._element)})),this._elementImg.addEventListener("click",(function(){return e._openPopupImg()}))}},{key:"_openPopupImg",value:function(){this._handleCardClick(this._name,this._link)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validationConfig=t,this._placeForm=n,this._buttonElement=this._placeForm.querySelector(this._validationConfig.submitButtonSelector),this._inputList=Array.from(this._placeForm.querySelectorAll(this._validationConfig.inputSelector))}var t,r;return t=e,(r=[{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._placeForm.querySelector(".".concat(e.id,"-error"));e.classList.add(this._validationConfig.inputErrorClass),n.textContent=t,n.classList.add(this._validationConfig.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._placeForm.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._validationConfig.inputErrorClass),t.classList.remove(this._validationConfig.errorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListenersInput",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"_disableSubmitButton",value:function(){this._buttonElement.classList.add(this._validationConfig.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._validationConfig.inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}},{key:"resetValid",value:function(){var e=this;this._disableSubmitButton(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._setEventListenersInput()}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._form=this._popup.querySelector(n.form),this._selectors=n,this._handleEscClose=this._handleEscClose.bind(this),this._popupSaveButton=this._popup.querySelector(this._selectors.popupSaveButton)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add(this._selectors.active)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove(this._selectors.active)}},{key:"activateLoader",value:function(e,t){e?(this._popupSaveButton.disabled=!0,this._popupSaveButton.textContent=t,this._popupSaveButton.classList.add(this._selectors.popupSaveButtonInactive)):(this._popupSaveButton.disabled=!1,this._popupSaveButton.textContent=this._popupSaveButton.value,this._popupSaveButton.classList.remove(this._selectors.popupSaveButtonInactive))}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){var n=e._popup.querySelector(e._selectors.containerClose);!t.target.classList.contains(e._selectors.closeButton)&&n.contains(t.target)||e.close()}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},c.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function p(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._handleSumbitForm=n,r._inputList=Array.from(r._form.querySelectorAll(t.input)),r}return t=a,(n=[{key:"getInputValues",value:function(){var e=this;return this._inputValues={},this._inputList.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;c(f(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSumbitForm(e.getInputValues())}))}},{key:"close",value:function(){this._form.reset(),c(f(a.prototype),"close",this).call(this)}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,t))._zoomMainImg=n._popup.querySelector(n._selectors.zoomMainImg),n._zoomCaption=n._popup.querySelector(n._selectors.zoomCaption),n}return t=a,(n=[{key:"open",value:function(e,t){this._zoomMainImg.src=t,this._zoomMainImg.alt=e,this._zoomCaption.textContent=e,y(k(a.prototype),"open",this).call(this)}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function L(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._handleDeleteCard=n,r}return t=a,(n=[{key:"open",value:function(e,t){C(I(a.prototype),"open",this).call(this),this._cardId=e,this._cardElement=t}},{key:"setEventListeners",value:function(){var e=this;C(I(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleDeleteCard(e._cardId,e._cardElement)}))}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"rendererAll",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._name.textContent,e.about=this._about.textContent,e.avatar=this._avatar.src,e._id=this._id,e}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about,this._avatar.src=e.avatar,this._id=e._id}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getAllCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._chechResponse)}},{key:"getInfoProfile",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._chechResponse)}},{key:"editProfile",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._chechResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._chechResponse)}},{key:"delCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._chechResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._chechResponse)}},{key:"delLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._chechResponse)}},{key:"changeAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._chechResponse)}},{key:"_chechResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),D={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active",popupContainer:"popup__container"},x={template:".card",card:".element",name:".element__name",likeButton:".element__like",buttonDeleteCard:".element__delete-ico",cardImg:".element__photo",likeActive:"element__like_active",numLike:".element__numLike"},V={active:"popup_active",containerClose:".popup__container-close",container:".popup__container",closeButton:"popup__close-ico",zoomMainImg:".popup__zoom-main-img",zoomCaption:".popup__zoom-caption",popupAddCard:".popup_type_add-card",form:".popup__form",input:".popup__input",popupZoomImgContainer:".popup_type_zoom-img",popupEditName:".popup_type_edit-name",nameInput:".popup__input_value_username",jobInput:".popup__input_value_about-user",popupConfirm:".popup_type_askDel",popupSaveButton:".popup__save-button",popupSaveButtonInactive:".popup__save-button_inactive",popupAvatar:".popup_type_updateAvatar"},z=document.querySelector(".edit-button"),U=document.querySelector(".add-button"),N=document.querySelector(".popup_type_updateAvatar").querySelector(".popup__form_type_updateAvatar"),F=document.querySelector(".popup_type_edit-name").querySelector(".popup__form_type_edit-name"),M=document.querySelector(".popup__form_type_add-card"),J=(M.querySelector(".popup__input_value_place-name"),M.querySelector(".popup__input_value_place-link"),document.querySelector(".profile").querySelector(".profile__photo"));function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=new T({url:"https://mesto.nomoreparties.co/v1/cohort-55",headers:{authorization:"bd61842b-8e5a-461e-8e0d-4a18541609f7","Content-Type":"application/json"}});Promise.all([Z.getInfoProfile(),Z.getAllCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ee.setUserInfo(o),ne.rendererAll(i.reverse())})).catch((function(e){return console.log("Ошибка: ".concat(e))}));var $=new r(D,M);$.enableValidation();var G=new r(D,F);G.enableValidation();var K=new r(D,N);K.enableValidation();var Q=new g(V.popupZoomImgContainer,V);Q.setEventListeners();var W=new h(V.popupAddCard,V,(function(e){W.activateLoader(!0,"Создание..."),Z.addCard(e).then((function(e){return ne.addItem(re(e))})).then((function(){return W.close()})).catch((function(e){return console.log(e)})).finally((function(){return W.activateLoader(!1)}))}));W.setEventListeners();var X=new h(V.popupEditName,V,(function(e){X.activateLoader(!0,"Сохранение..."),Z.editProfile(e).then((function(e){return ee.setUserInfo(e)})).then((function(){return X.close()})).catch((function(e){return console.log(e)})).finally((function(){return X.activateLoader(!1)}))}));X.setEventListeners();var Y=new h(V.popupAvatar,V,(function(){Y.activateLoader(!0,"Сохранение..."),Z.changeAvatar(Y.getInputValues()).then((function(e){return ee.setUserInfo(e)})).then((function(){return Y.close()})).catch((function(e){return console.log(e)})).finally((function(){return Y.activateLoader(!1)}))}));Y.setEventListeners();var ee=new R({name:".profile__user-name",about:".profile__about-user",avatar:".profile__photo"}),te=new j(V.popupConfirm,V,(function(e,t){Z.delCard(e,t).then((function(){return t.remove()})).then((function(){return te.close()})).catch((function(e){return console.log(e)}))}));te.setEventListeners();var ne=new B({dataBase:[],renderer:function(e){ne.addItem(re(e))}},".elements");function re(e){return new t(x,e,ie,te,oe,ee.getUserInfo()).generateCard()}function oe(e,t,n,r,o,i){var a=ee.getUserInfo();e?Z.delLike(n,a).then((function(e){r.classList.remove(o),i.textContent=e.likes.length,t.pop(a)})).catch((function(e){return console.log(e)})):Z.addLike(n,a).then((function(e){r.classList.add(o),i.textContent=e.likes.length,t.push(a)})).catch((function(e){return console.log(e)}))}function ie(e,t){Q.open(e,t)}U.addEventListener("click",(function(){$.resetValid(),W.open()})),J.addEventListener("click",(function(){K.resetValid(),Y.open()})),z.addEventListener("click",(function(){X.open(),G.resetValid(),X.setInputValues(ee.getUserInfo())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0wwQixFQUFXTCxVQUFVQyxJQUFJZ0wsR0FDekJDLEVBQWEvTCxZQUFjUixFQUFLakIsTUFBTTBCLE9BQ3RDNEwsRUFBV08sS0FBS0osRUFDbEIsSUFDQzVCLE9BQU0sU0FBQ0MsR0FBRyxPQUFLQyxRQUFRQyxJQUFJRixFQUFJLEdBVXhDLENBNkJBLFNBQVN4TSxHQUFnQk0sRUFBTUUsR0FDN0J1TSxFQUFTdEosS0FBS25ELEVBQU1FLEVBQ3RCLENBRUE4SyxFQUFVaEksaUJBQWlCLFNBQVMsV0FDbENxSixFQUFzQjZCLGFBQ3RCMUQsRUFBYXJILE1BQ2YsSUFFQWlJLEVBQVlwSSxpQkFBaUIsU0FBUyxXQUNwQ3dKLEVBQXlCMEIsYUFDekJmLEVBQWdCaEssTUFDbEIsSUFHQTRILEVBQWtCL0gsaUJBQWlCLFNBQVMsV0FDMUNpSyxFQUFpQjlKLE9BQ2pCb0osRUFBdUIyQixhQUN2QmpCLEVBQWlCa0IsZUFBZXZDLEdBQVkyQixjQUM5QyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwUGljdHVyZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybURlbC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoY2FyZEVsZW1lbnRzU2VsZWN0b3JzLCBcclxuICAgICAgICAgICAgICAgIGl0ZW0sIFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlQ2FyZENsaWNrLCBcclxuICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1EZWxldGVDbGljayxcclxuICAgICAgICAgICAgICAgIGhhbmRsZUxpa2VDbGljaywgXHJcbiAgICAgICAgICAgICAgICB1c2VyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX25hbWUgPSBpdGVtLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGl0ZW0ubGluaztcclxuICAgICAgICB0aGlzLl9saWtlcyA9IGl0ZW0ubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnRzU2VsZWN0b3JzID0gY2FyZEVsZW1lbnRzU2VsZWN0b3JzO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVDb25maXJtRGVsZXRlQ2xpY2sgPSBoYW5kbGVDb25maXJtRGVsZXRlQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJZCA9IGl0ZW0uX2lkO1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gaXRlbS5jYXJkRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gdXNlci5faWQ7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gaXRlbS5vd25lci5faWQ7XHJcbiAgICB9XHJcbi8vINC/0L7Qu9GD0YfQsNC10Lwg0YDQsNC30LzQtdGC0LrRgyDQutCw0YDRgtC+0YfQutC4INC4INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8KNGI0LDQsdC70L7QvSlcclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gIGRvY3VtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZEVsZW1lbnRzU2VsZWN0b3JzLnRlbXBsYXRlKVxyXG4gICAgICAgIC5jb250ZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZEVsZW1lbnRzU2VsZWN0b3JzLmNhcmQpXHJcbiAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuLy8g0L3QsNC/0L7Qu9C90Y/QtdC8INC60LDRgNGC0L7Rh9C60YMg0LTQsNC90L3Ri9C80LhcclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnROYW1lID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRFbGVtZW50c1NlbGVjdG9ycy5uYW1lKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50SW1nID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRFbGVtZW50c1NlbGVjdG9ycy5jYXJkSW1nKTtcclxuICAgICAgICB0aGlzLl9saWtlQ291bnRFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRFbGVtZW50c1NlbGVjdG9ycy5udW1MaWtlKTtcclxuICAgICAgICB0aGlzLl9saWtlQ291bnRFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50SW1nLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudEltZy5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyQWN0aXZlTGlrZXMoKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJBY3RpdmVEZWxJY28oKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuICAgIF9yZW5kZXJBY3RpdmVEZWxJY28oKSB7XHJcbiAgICAgICAgaWYodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBfaW5pdGlhbEFjdGl2ZUxpa2VzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9saWtlcy5maW5kKChsaWtlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsaWtlLl9pZCA9PT0gdGhpcy5fb3duZXJJZFxyXG4gICAgICAgIH0pXHJcbiAgICB9O1xyXG4vLyDQkNC60YLQuNCy0L3QsNGPINC40LrQvtC90LrQsCDQu9Cw0LnQutCwXHJcbiAgICBfbGlrZUFjdGl2ZSgpIHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fY2FyZEVsZW1lbnRzU2VsZWN0b3JzLmxpa2VBY3RpdmUpO1xyXG4gICAgfTtcclxuICAgIF9yZW5kZXJBY3RpdmVMaWtlcygpIHtcclxuICAgICAgICBpZih0aGlzLl9saWtlcy5maW5kKHVzZXIgPT4gdXNlci5faWQgPT09IHRoaXMuX293bmVySWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpa2VBY3RpdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9oYW5kbGVMaWtlQ2FyZCgpIHtcclxuICAgICAgICBpZih0aGlzLl9pbml0aWFsQWN0aXZlTGlrZXMoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soXHJcbiAgICAgICAgICAgICAgICB0cnVlLCBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VzLCBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhcmRJZCwgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLCBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhcmRFbGVtZW50c1NlbGVjdG9ycy5saWtlQWN0aXZlLCBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VDb3VudEVsZW1lbnQpXHJcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faW5pdGlhbEFjdGl2ZUxpa2VzKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKFxyXG4gICAgICAgICAgICAgICAgZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlrZXMsIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZElkLCBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24sIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnRzU2VsZWN0b3JzLmxpa2VBY3RpdmUsIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlrZUNvdW50RWxlbWVudClcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4vLyDRgdC70YPRiNCw0YLQtdC70Lgg0L7RgtC00LXQu9GM0L3Ri9GFINGE0YPQvdC60YbQuNC+0L3QsNC70YzQvdGL0YUg0Y3Qu9C10LzQtdC90YLQvtCyINC60LDRgNGC0L7Rh9C60LhcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRFbGVtZW50c1NlbGVjdG9ycy5saWtlQnV0dG9uKTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNhcmQoKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkRWxlbWVudHNTZWxlY3RvcnMuYnV0dG9uRGVsZXRlQ2FyZCk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybURlbGV0ZUNsaWNrLm9wZW4odGhpcy5fY2FyZElkLCB0aGlzLl9lbGVtZW50KX0pO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRJbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9vcGVuUG9wdXBJbWcoKSk7XHJcbiAgICAgICAgXHJcbiAgICB9O1xyXG4vLyDRg9Cy0LXQu9C40YfQtdC90L3QsNGPINC60LDRgNGC0LjQvdC60LAg0Lgg0L/QvtC00L/QuNGB0YxcclxuICAgIF9vcGVuUG9wdXBJbWcoKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsaWRhdGlvbkNvbmZpZyA9IHZhbGlkYXRpb25Db25maWc7XHJcbiAgICAgICAgdGhpcy5fcGxhY2VGb3JtID0gZm9ybTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fcGxhY2VGb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9wbGFjZUZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIH1cclxuICAgIC8vINC/0YDQvtCy0LXRgNGP0LXQvCDQstCw0LvQuNC00L3QvtGB0YLRjCDQv9C+0LvRj1xyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9fVxyXG5cclxuICAgIC8vINC00L7QsdCw0LLQu9GP0LXQvCDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9wbGFjZUZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIC8vINGD0LTQsNC70Y/QtdC8INC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9wbGFjZUZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8g0YHQu9GD0YjQsNGC0LXQu9C4INC60LDQttC00L7QvNGDINC40L3Qv9GD0YLRg1xyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzSW5wdXQoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2Rpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICAvLyDQldGB0LvQuCDQtdGB0YLRjCDRhdC+0YLRjyDQsdGLINC+0LTQuNC9INC90LXQstCw0LvQuNC00L3Ri9C5INC40L3Qv9GD0YJcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgLy8g0YHQtNC10LvQsNC5INC60L3QvtC/0LrRgyDQvdC10LDQutGC0LjQstC90L7QuVxyXG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g0LjQvdCw0YfQtSDRgdC00LXQu9Cw0Lkg0LrQvdC+0L/QutGDINCw0LrRgtC40LLQvdC+0LlcclxuICAgICAgICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVzZXRWYWxpZCgpIHtcclxuICAgICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzSW5wdXQoKTtcclxuICAgIH1cclxufTtcclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHNlbGVjdG9ycykge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZm9ybSk7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0b3JzID0gc2VsZWN0b3JzO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9wb3B1cFNhdmVCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5wb3B1cFNhdmVCdXR0b24pXHJcbiAgICB9XHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NlbGVjdG9ycy5hY3RpdmUpO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5hY3RpdmUpO1xyXG4gICAgfVxyXG4gICAgYWN0aXZhdGVMb2FkZXIobG9hZCwgdGV4dCkge1xyXG4gICAgICAgIGlmKGxvYWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBTYXZlQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBTYXZlQnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBTYXZlQnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLnBvcHVwU2F2ZUJ1dHRvbkluYWN0aXZlKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwU2F2ZUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3B1cFNhdmVCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9wb3B1cFNhdmVCdXR0b24udmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwU2F2ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5wb3B1cFNhdmVCdXR0b25JbmFjdGl2ZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5jb250YWluZXJDbG9zZSk7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9zZWxlY3RvcnMuY2xvc2VCdXR0b24pIHx8ICFjb250YWluZXJDbG9zZS5jb250YWlucyhldnQudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzZWxlY3RvcnMsIGhhbmRsZVN1bWJpdEZvcm0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yLCBzZWxlY3RvcnMpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1bWJpdEZvcm0gPSBoYW5kbGVTdW1iaXRGb3JtO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5pbnB1dCkpO1xyXG4gICAgfVxyXG4gICAgLy8g0L/QvtC70YPRh9Cw0LXQvCDQt9C90LDRh9C10L3QuNC1INC40L3Qv9GD0YLQsCwg0LLQutC70LDQtNGL0LLQsNC10Lwg0LIg0L3QvtCy0YvQuSDQvtCx0YrQtdC60YIg0Lgg0LXQs9C+INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8XHJcbiAgICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTsgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xyXG4gICAgfVxyXG4gICAgLy8g0YHQu9GD0YjQsNGC0LXQu9GMINC/0L7QvNC40LzQviDRgdGC0LDQvdC00LDRgNGC0L3QvtCz0L4g0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0L/QtdGA0LXQtNCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0L3QvtCy0YvQvNC4INC00LDQvdC90YvQvNC4XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlU3VtYml0Rm9ybSh0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7IC8vINGB0LHRgNC+0YHQuNC70Lgg0LfQvdCw0YfQtdC90LjRjyDRhNC+0YDQvNGLXHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8vINCy0L7Qt9Cy0YDQsNGCINC40YHRhdC+0LTQvdC+0LPQviDQt9C90LDRh9C10L3QuNGPKNC/0L7Qu9GD0YfQsNC10Lwg0LjQtyDQvtCx0YrQtdC60YLQsCDRgSDQtNCw0L3QvdGL0LzQuCDQuCDQstC60LvQsNC00YvQstCw0LXQvCDQsiDQuNC90L/Rg9GCKVxyXG4gICAgc2V0SW5wdXRWYWx1ZXMoZGF0YVRvU2V0dXApIHtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IGRhdGFUb1NldHVwW2lucHV0Lm5hbWVdO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwUGljdHVyZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHNlbGVjdG9ycykge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IsIHNlbGVjdG9ycylcclxuICAgICAgICB0aGlzLl96b29tTWFpbkltZyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLnpvb21NYWluSW1nKTtcclxuICAgICAgICB0aGlzLl96b29tQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLnpvb21DYXB0aW9uKTtcclxuICAgIH1cclxuICAgIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgICAgIHRoaXMuX3pvb21NYWluSW1nLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fem9vbU1haW5JbWcuYWx0ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl96b29tQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cENvbmZpcm1EZWwgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzZWxlY3RvcnMsIGhhbmRsZURlbGV0ZUNhcmQpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yLCBzZWxlY3RvcnMpXHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgICB9XHJcbiAgICBvcGVuKGNhcmRJZCwgY2FyZEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQodGhpcy5fY2FyZElkLCB0aGlzLl9jYXJkRWxlbWVudCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IgKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIC8vINCh0L7QtNC10YDQttC40YIg0L/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQsINC60L7RgtC+0YDRi9C5INC+0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0YDQuNGB0L7QstC60YMg0LLRgdC10YUg0Y3Qu9C10LzQtdC90YLQvtCyXHJcbiAgICByZW5kZXJlckFsbChkYXRhQmFzZSkge1xyXG4gICAgICAgIGRhdGFCYXNlLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyDQodC+0LTQtdGA0LbQuNGCINC/0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0IGFkZEl0ZW0sINC60L7RgtC+0YDRi9C5INC/0YDQuNC90LjQvNCw0LXRgiBET00t0Y3Qu9C10LzQtdC90YIg0Lgg0LTQvtCx0LDQstC70Y/QtdGCINC10LPQviDQsiDQutC+0L3RgtC10LnQvdC10YBcclxuICAgIGFkZEl0ZW0oZG9tRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGRvbUVsZW1lbnQpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XHJcbiAgICAgICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0KTtcclxuICAgICAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhcik7XHJcbiAgICB9XHJcbiAgICAvLyDQstC+0LfQstGA0LDRidCw0LXQvCDQvtCx0YrQtdC60YIg0YEg0YLQtdC60YPRidC40LzQuCDQtNCw0L3QvdGL0LzQuCBET01cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJJbmZvID0ge307XHJcbiAgICAgICAgdXNlckluZm8ubmFtZSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdXNlckluZm8uYWJvdXQgPSB0aGlzLl9hYm91dC50ZXh0Q29udGVudDtcclxuICAgICAgICB1c2VySW5mby5hdmF0YXIgPSB0aGlzLl9hdmF0YXIuc3JjO1xyXG4gICAgICAgIHVzZXJJbmZvLl9pZCA9IHRoaXMuX2lkO1xyXG4gICAgICAgIHJldHVybiB1c2VySW5mbztcclxuICAgIH1cclxuICAgIC8vINCy0YHRgtCw0LLQu9GP0LXQvCDQsiBET00g0L/QvtC70YPRh9C10L3QvdGL0LUg0LTQsNC90L3Ri9C1INC40Lcg0LjQvdC/0YPRgtC+0LJcclxuICAgIHNldFVzZXJJbmZvKGlucHV0VmFsdWVzKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGlucHV0VmFsdWVzLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlcy5hYm91dDtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gaW5wdXRWYWx1ZXMuYXZhdGFyO1xyXG4gICAgICAgIHRoaXMuX2lkID0gaW5wdXRWYWx1ZXMuX2lkO1xyXG4gICAgfVxyXG59IiwiXHJcbmV4cG9ydCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gY29uZmlnLnVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsQ2FyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNoUmVzcG9uc2UpXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5mb1Byb2ZpbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNoUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGVkaXRQcm9maWxlKGlucHV0VmFsdWVzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogaW5wdXRWYWx1ZXMubmFtZSxcclxuICAgICAgICAgICAgICAgIGFib3V0OiBpbnB1dFZhbHVlcy5hYm91dFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2hSZXNwb25zZSlcclxuICAgIH1cclxuXHJcbiAgICBhZGRDYXJkKGNhcmQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGNhcmQubmFtZSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGNhcmQubGlua1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2hSZXNwb25zZSlcclxuICAgIH1cclxuXHJcbiAgICBkZWxDYXJkKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2hSZXNwb25zZSlcclxuICAgIH1cclxuXHJcbiAgICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2hSZXNwb25zZSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgZGVsTGlrZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNoUmVzcG9uc2UpXHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlQXZhdGFyKHVybEF2YXRhcikge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXI6IHVybEF2YXRhci5hdmF0YXJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNoUmVzcG9uc2UpXHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNoUmVzcG9uc2UocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGZvcm1Db25maWdTZWxlY3RvciA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZS1idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc2F2ZS1idXR0b25faW5hY3RpdmUnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZScsXHJcbiAgcG9wdXBDb250YWluZXI6ICdwb3B1cF9fY29udGFpbmVyJ1xyXG4gIH07XHJcbmV4cG9ydCBjb25zdCBjYXJkU2VsZWN0b3IgPSB7XHJcbiAgdGVtcGxhdGU6ICcuY2FyZCcsXHJcbiAgY2FyZDogJy5lbGVtZW50JyxcclxuICBuYW1lOiAnLmVsZW1lbnRfX25hbWUnLFxyXG4gIGxpa2VCdXR0b246ICcuZWxlbWVudF9fbGlrZScsXHJcbiAgYnV0dG9uRGVsZXRlQ2FyZDogJy5lbGVtZW50X19kZWxldGUtaWNvJyxcclxuICBjYXJkSW1nOiAnLmVsZW1lbnRfX3Bob3RvJyxcclxuICBsaWtlQWN0aXZlOiAnZWxlbWVudF9fbGlrZV9hY3RpdmUnLFxyXG4gIG51bUxpa2U6ICcuZWxlbWVudF9fbnVtTGlrZScsXHJcbn07XHJcbmV4cG9ydCBjb25zdCBwb3B1cFNlbGVjdG9yID0ge1xyXG4gIGFjdGl2ZTogJ3BvcHVwX2FjdGl2ZScsXHJcbiAgY29udGFpbmVyQ2xvc2U6ICcucG9wdXBfX2NvbnRhaW5lci1jbG9zZScsXHJcbiAgY29udGFpbmVyOiAnLnBvcHVwX19jb250YWluZXInLFxyXG4gIGNsb3NlQnV0dG9uOiAncG9wdXBfX2Nsb3NlLWljbycsXHJcbiAgem9vbU1haW5JbWc6ICcucG9wdXBfX3pvb20tbWFpbi1pbWcnLFxyXG4gIHpvb21DYXB0aW9uOiAnLnBvcHVwX196b29tLWNhcHRpb24nLFxyXG4gIHBvcHVwQWRkQ2FyZDogJy5wb3B1cF90eXBlX2FkZC1jYXJkJyxcclxuICBmb3JtOiAnLnBvcHVwX19mb3JtJyxcclxuICBpbnB1dDogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHBvcHVwWm9vbUltZ0NvbnRhaW5lcjogJy5wb3B1cF90eXBlX3pvb20taW1nJyxcclxuICBwb3B1cEVkaXROYW1lOiAnLnBvcHVwX3R5cGVfZWRpdC1uYW1lJyxcclxuICBuYW1lSW5wdXQ6ICcucG9wdXBfX2lucHV0X3ZhbHVlX3VzZXJuYW1lJyxcclxuICBqb2JJbnB1dDogJy5wb3B1cF9faW5wdXRfdmFsdWVfYWJvdXQtdXNlcicsXHJcbiAgcG9wdXBDb25maXJtOiAnLnBvcHVwX3R5cGVfYXNrRGVsJyxcclxuICBwb3B1cFNhdmVCdXR0b246ICcucG9wdXBfX3NhdmUtYnV0dG9uJyxcclxuICBwb3B1cFNhdmVCdXR0b25JbmFjdGl2ZTogJy5wb3B1cF9fc2F2ZS1idXR0b25faW5hY3RpdmUnLFxyXG4gIHBvcHVwQXZhdGFyOiAnLnBvcHVwX3R5cGVfdXBkYXRlQXZhdGFyJyxcclxufTtcclxuZXhwb3J0IGNvbnN0IHVzZXJEYXRhU2VsZWN0b3IgPSB7XHJcbiAgbmFtZTogJy5wcm9maWxlX191c2VyLW5hbWUnLFxyXG4gIGFib3V0OiAnLnByb2ZpbGVfX2Fib3V0LXVzZXInLFxyXG4gIGF2YXRhcjogJy5wcm9maWxlX19waG90bydcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9ICcuZWxlbWVudHMnO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtYnV0dG9uJyk7XHJcbmNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfdXBkYXRlQXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudENoYW5nZUF2YXRhciA9IHBvcHVwVXBkYXRlQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX3VwZGF0ZUF2YXRhcicpO1xyXG5jb25zdCBwb3B1cEVkaXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdC1uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudEVkaXROYW1lID0gcG9wdXBFZGl0TmFtZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fdHlwZV9lZGl0LW5hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50QWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX2FkZC1jYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBwbGFjZU5hbWUgPSBmb3JtRWxlbWVudEFkZENhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF92YWx1ZV9wbGFjZS1uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBwbGFjZUxpbmsgPSBmb3JtRWxlbWVudEFkZENhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF92YWx1ZV9wbGFjZS1saW5rJyk7XHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyUGhvdG8gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19waG90bycpOyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwUGljdHVyZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwUGljdHVyZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cENvbmZpcm1EZWwgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1EZWwuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIlxyXG5pbXBvcnQgeyBcclxuICBmb3JtQ29uZmlnU2VsZWN0b3IsXHJcbiAgY2FyZFNlbGVjdG9yLFxyXG4gIHBvcHVwU2VsZWN0b3IsXHJcbiAgdXNlckRhdGFTZWxlY3RvcixcclxuICBmb3JtRWxlbWVudEFkZENhcmQsXHJcbiAgZm9ybUVsZW1lbnRFZGl0TmFtZSxcclxuICBmb3JtRWxlbWVudENoYW5nZUF2YXRhcixcclxuICBjYXJkTGlzdCxcclxuICBhZGRCdXR0b24sXHJcbiAgYnV0dG9uRWRpdFByb2ZpbGUsXHJcbiAgYXZhdGFyUGhvdG8sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNTUnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdiZDYxODQyYi04ZTVhLTQ2MWUtOGUwZC00YTE4NTQxNjA5ZjcnLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUNvbmZpZyk7XHJcblxyXG5mdW5jdGlvbiBnZXREYXRhQWxscGFnZSgpIHtcclxuICBQcm9taXNlLmFsbChbYXBpLmdldEluZm9Qcm9maWxlKCksIGFwaS5nZXRBbGxDYXJkcygpXSlcclxuICAgIC50aGVuKChbdXNlckRhdGEsIGNhcmRzTGlzdERhdGFdKSA9PiB7XHJcbiAgICAgIG5ld1VzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTsgLy8g0YLRg9GCINGD0YHRgtCw0L3QvtCy0LrQsCDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgIGNhcmRzTGlzdC5yZW5kZXJlckFsbChjYXJkc0xpc3REYXRhLnJldmVyc2UoKSk7IC8vINC4INGC0YPRgiDQvtGC0YDQuNGB0L7QstC60LAg0LrQsNGA0YLQvtGH0LXQulxyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBcclxuICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCkpIC8vINGC0YPRgiDQu9C+0LLQuNC8INC+0YjQuNCx0LrRg1xyXG59XHJcbmdldERhdGFBbGxwYWdlKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvciAoZm9ybUNvbmZpZ1NlbGVjdG9yLCBmb3JtRWxlbWVudEFkZENhcmQpO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBlZGl0TmFtZUZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IgKGZvcm1Db25maWdTZWxlY3RvciwgZm9ybUVsZW1lbnRFZGl0TmFtZSk7XHJcbmVkaXROYW1lRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBlZGl0QXZhdGFyRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvciAoZm9ybUNvbmZpZ1NlbGVjdG9yLCBmb3JtRWxlbWVudENoYW5nZUF2YXRhcik7XHJcbmVkaXRBdmF0YXJGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwb3B1cEltZyA9IG5ldyBQb3B1cFBpY3R1cmUocG9wdXBTZWxlY3Rvci5wb3B1cFpvb21JbWdDb250YWluZXIsIHBvcHVwU2VsZWN0b3IpO1xyXG5wb3B1cEltZy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cFNlbGVjdG9yLnBvcHVwQWRkQ2FyZCwgcG9wdXBTZWxlY3RvciwgaGFuZGxlQ2FyZFN1Ym1pdCk7XHJcbnBvcHVwQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBTZWxlY3Rvci5wb3B1cEVkaXROYW1lLCBwb3B1cFNlbGVjdG9yLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XHJcbnBvcHVwRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgcG9wdXBVc2VyQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBTZWxlY3Rvci5wb3B1cEF2YXRhciwgcG9wdXBTZWxlY3RvciwgaGFuZGxlQXZhdGFyU3VibWl0KTtcclxucG9wdXBVc2VyQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IG5ld1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHVzZXJEYXRhU2VsZWN0b3IpO1xyXG5jb25zdCBwb3B1cENvbmZpcm1EZWwgPSBuZXcgUG9wdXBDb25maXJtRGVsKHBvcHVwU2VsZWN0b3IucG9wdXBDb25maXJtLCBwb3B1cFNlbGVjdG9yLCBoYW5kbGVEZWxldGVDYXJkKTtcclxucG9wdXBDb25maXJtRGVsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKCBcclxueyBcclxuICBkYXRhQmFzZTogW10sXHJcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVOZXdDYXJkKGl0ZW0pKTtcclxuICB9XHJcbn0sIGNhcmRMaXN0KTtcclxuLy8g0KHQvtC30LTQsNC10Lwg0LrQsNGA0YLQvtGH0LrRgyDQv9C+INGI0LDQsdC70L7QvdGDINC4INC90LDQv9C+0LvQvdGP0LXQvCDQtNCw0L3QvdGL0LzQuCBcclxuZnVuY3Rpb24gY3JlYXRlTmV3Q2FyZChpdGVtKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZFNlbGVjdG9yLCBcclxuICAgIGl0ZW0sIFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLCBcclxuICAgIHBvcHVwQ29uZmlybURlbCxcclxuICAgIGhhbmRsZUxpa2VDbGljayxcclxuICAgIG5ld1VzZXJJbmZvLmdldFVzZXJJbmZvKCksXHJcbiAgKTtcclxuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkSWQsIGNhcmRFbGVtZW50KSB7XHJcbiAgYXBpLmRlbENhcmQoY2FyZElkLCBjYXJkRWxlbWVudClcclxuICAgIC50aGVuKCgpID0+IGNhcmRFbGVtZW50LnJlbW92ZSgpKVxyXG4gICAgLnRoZW4oKCkgPT4gcG9wdXBDb25maXJtRGVsLmNsb3NlKCkpXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGxpa2VkQmVmb3JlLCBsaWtlc0FycmF5LCBjYXJkSWQsIGxpa2VCdXR0b24sIGJ1dHRvbkFjdGl2ZVNlbGVjdG9yLCBsaWtlc0NvdW50ZXIpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gbmV3VXNlckluZm8uZ2V0VXNlckluZm8oKVxyXG4gICAgaWYoIWxpa2VkQmVmb3JlKSB7XHJcbiAgICAgIGFwaS5hZGRMaWtlKGNhcmRJZCwgY3VycmVudFVzZXIpXHJcbiAgICAgICAgLnRoZW4oKGNhcmQpID0+IHtcclxuICAgICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChidXR0b25BY3RpdmVTZWxlY3Rvcik7XHJcbiAgICAgICAgICBsaWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICAgIGxpa2VzQXJyYXkucHVzaChjdXJyZW50VXNlcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFwaS5kZWxMaWtlKGNhcmRJZCwgY3VycmVudFVzZXIpXHJcbiAgICAgICAgLnRoZW4oKGNhcmQpID0+IHtcclxuICAgICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShidXR0b25BY3RpdmVTZWxlY3Rvcik7XHJcbiAgICAgICAgICBsaWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICAgIGxpa2VzQXJyYXkucG9wKGN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgcG9wdXBBZGRDYXJkLmFjdGl2YXRlTG9hZGVyKHRydWUsICfQodC+0LfQtNCw0L3QuNC1Li4uJylcclxuICBhcGkuYWRkQ2FyZChpbnB1dFZhbHVlcylcclxuICAgIC50aGVuKChkYXRhKSA9PiBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVOZXdDYXJkKGRhdGEpKSlcclxuICAgIC50aGVuKCgpID0+IHBvcHVwQWRkQ2FyZC5jbG9zZSgpKVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cEFkZENhcmQuYWN0aXZhdGVMb2FkZXIoZmFsc2UpKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBwb3B1cEVkaXRQcm9maWxlLmFjdGl2YXRlTG9hZGVyKHRydWUsICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpXHJcbiAgYXBpLmVkaXRQcm9maWxlKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IG5ld1VzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpKVxyXG4gICAgLnRoZW4oKCkgPT4gcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpKVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cEVkaXRQcm9maWxlLmFjdGl2YXRlTG9hZGVyKGZhbHNlKSlcclxuXHJcbn07XHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhclN1Ym1pdCgpIHtcclxuICBwb3B1cFVzZXJBdmF0YXIuYWN0aXZhdGVMb2FkZXIodHJ1ZSwgJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJylcclxuICBhcGkuY2hhbmdlQXZhdGFyKHBvcHVwVXNlckF2YXRhci5nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IG5ld1VzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpKVxyXG4gICAgLnRoZW4oKCkgPT4gcG9wdXBVc2VyQXZhdGFyLmNsb3NlKCkpXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHBvcHVwVXNlckF2YXRhci5hY3RpdmF0ZUxvYWRlcihmYWxzZSkpXHJcbn1cclxuLy8g0J/QvtC00LPRgNGD0LfQutCwINC80LDQu9C10L3RjNC60L7QuSBpbWcsINC4INC90LDQuNC80LXQvdC+0LLQsNC90LjQuSDQsiDQv9C+0L/QsNC/Wm9vbVxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIHBvcHVwSW1nLm9wZW4obmFtZSwgbGluayk7XHJcbn07XHJcbi8vINCh0L7QsdGL0YLQuNC1INC90LDQttCw0L3QuNGPINC90LAg0LrQvdC+0L/QutGDINC00L7QsdCw0LLQu9C10LjQvdGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWQoKTtcclxuICBwb3B1cEFkZENhcmQub3BlbigpO1xyXG59KTsgXHJcblxyXG5hdmF0YXJQaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBlZGl0QXZhdGFyRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZCgpO1xyXG4gIHBvcHVwVXNlckF2YXRhci5vcGVuKCk7XHJcbn0pXHJcblxyXG4vLyDQodC+0LHRi9GC0LjQtSDQvdCw0LbQsNC90LjRjyDQvdCwINC60L3QvtC/0LrRgyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcbmJ1dHRvbkVkaXRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xyXG4gIGVkaXROYW1lRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZCgpO1xyXG4gIHBvcHVwRWRpdFByb2ZpbGUuc2V0SW5wdXRWYWx1ZXMobmV3VXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbn0pOyBcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjYXJkRWxlbWVudHNTZWxlY3RvcnMiLCJpdGVtIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ29uZmlybURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidXNlciIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkRWxlbWVudHNTZWxlY3RvcnMiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUNvbmZpcm1EZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfY2FyZElkIiwiX2lkIiwiX2NhcmRFbGVtZW50IiwiY2FyZEVsZW1lbnQiLCJfb3duZXJJZCIsIl91c2VySWQiLCJvd25lciIsIl9lbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGVtcGxhdGUiLCJjb250ZW50IiwiY2FyZCIsImNsb25lTm9kZSIsIl9nZXRUZW1wbGF0ZSIsIl9lbGVtZW50TmFtZSIsIl9lbGVtZW50SW1nIiwiY2FyZEltZyIsIl9saWtlQ291bnRFbGVtZW50IiwibnVtTGlrZSIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiYWx0Iiwic3JjIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3JlbmRlckFjdGl2ZUxpa2VzIiwiX3JlbmRlckFjdGl2ZURlbEljbyIsIl9idXR0b25EZWxldGVDYXJkIiwic3R5bGUiLCJkaXNwbGF5IiwiZmluZCIsImxpa2UiLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsImxpa2VBY3RpdmUiLCJfbGlrZUFjdGl2ZSIsIl9pbml0aWFsQWN0aXZlTGlrZXMiLCJsaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQ2FyZCIsImJ1dHRvbkRlbGV0ZUNhcmQiLCJvcGVuIiwiX29wZW5Qb3B1cEltZyIsIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybSIsIl92YWxpZGF0aW9uQ29uZmlnIiwiX3BsYWNlRm9ybSIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJyZW1vdmUiLCJzb21lIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVTdWJtaXRCdXR0b24iLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiX3NldEV2ZW50TGlzdGVuZXJzSW5wdXQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJzZWxlY3RvcnMiLCJfcG9wdXAiLCJfZm9ybSIsIl9zZWxlY3RvcnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX3BvcHVwU2F2ZUJ1dHRvbiIsInBvcHVwU2F2ZUJ1dHRvbiIsImV2dCIsImtleSIsImNsb3NlIiwiYWN0aXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImxvYWQiLCJ0ZXh0IiwicG9wdXBTYXZlQnV0dG9uSW5hY3RpdmUiLCJ2YWx1ZSIsImNvbnRhaW5lckNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZUJ1dHRvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdW1iaXRGb3JtIiwiX2hhbmRsZVN1bWJpdEZvcm0iLCJpbnB1dCIsIl9pbnB1dFZhbHVlcyIsInByZXZlbnREZWZhdWx0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImRhdGFUb1NldHVwIiwiUG9wdXBQaWN0dXJlIiwiX3pvb21NYWluSW1nIiwiem9vbU1haW5JbWciLCJfem9vbUNhcHRpb24iLCJ6b29tQ2FwdGlvbiIsIlBvcHVwQ29uZmlybURlbCIsImhhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsImNhcmRJZCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImRhdGFCYXNlIiwiZG9tRWxlbWVudCIsInByZXBlbmQiLCJVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwiX2Fib3V0IiwiX2F2YXRhciIsInVzZXJJbmZvIiwiaW5wdXRWYWx1ZXMiLCJBcGkiLCJjb25maWciLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwiX2NoZWNoUmVzcG9uc2UiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVybEF2YXRhciIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmb3JtQ29uZmlnU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJwb3B1cENvbnRhaW5lciIsImNhcmRTZWxlY3RvciIsImNvbnRhaW5lciIsInBvcHVwQWRkQ2FyZCIsInBvcHVwWm9vbUltZ0NvbnRhaW5lciIsInBvcHVwRWRpdE5hbWUiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInBvcHVwQ29uZmlybSIsInBvcHVwQXZhdGFyIiwiYnV0dG9uRWRpdFByb2ZpbGUiLCJhZGRCdXR0b24iLCJmb3JtRWxlbWVudENoYW5nZUF2YXRhciIsImZvcm1FbGVtZW50RWRpdE5hbWUiLCJmb3JtRWxlbWVudEFkZENhcmQiLCJhdmF0YXJQaG90byIsImFwaSIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRJbmZvUHJvZmlsZSIsImdldEFsbENhcmRzIiwidXNlckRhdGEiLCJjYXJkc0xpc3REYXRhIiwibmV3VXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNhcmRzTGlzdCIsInJlbmRlcmVyQWxsIiwicmV2ZXJzZSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFkZENhcmRGb3JtVmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJlZGl0TmFtZUZvcm1WYWxpZGF0aW9uIiwiZWRpdEF2YXRhckZvcm1WYWxpZGF0aW9uIiwicG9wdXBJbWciLCJzZXRFdmVudExpc3RlbmVycyIsImFjdGl2YXRlTG9hZGVyIiwiYWRkQ2FyZCIsImRhdGEiLCJhZGRJdGVtIiwiY3JlYXRlTmV3Q2FyZCIsImZpbmFsbHkiLCJwb3B1cEVkaXRQcm9maWxlIiwiZWRpdFByb2ZpbGUiLCJwb3B1cFVzZXJBdmF0YXIiLCJjaGFuZ2VBdmF0YXIiLCJwb3B1cENvbmZpcm1EZWwiLCJkZWxDYXJkIiwiZ2V0VXNlckluZm8iLCJnZW5lcmF0ZUNhcmQiLCJsaWtlZEJlZm9yZSIsImxpa2VzQXJyYXkiLCJidXR0b25BY3RpdmVTZWxlY3RvciIsImxpa2VzQ291bnRlciIsImN1cnJlbnRVc2VyIiwiZGVsTGlrZSIsInBvcCIsImFkZExpa2UiLCJwdXNoIiwicmVzZXRWYWxpZCIsInNldElucHV0VmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==